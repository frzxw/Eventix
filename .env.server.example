# ==================== DATABASE ====================
# Azure SQL Database Connection String
DATABASE_URL="Server=tcp:eventix-sql-server.database.windows.net,1433;Initial Catalog=eventix-db;Encrypt=true;Connection Timeout=30;Authentication=Active Directory Interactive"
# Alternative format for local development:
# DATABASE_URL="sqlserver://localhost:1433;database=eventix_db;user=sa;password=YourPassword;encrypt=true;trustServerCertificate=true"

# ==================== JWT SECRETS ====================
# Change these in production and store in Azure Key Vault!
JWT_SECRET="your-super-secret-jwt-key-minimum-32-characters"
JWT_REFRESH_SECRET="your-super-secret-refresh-key-minimum-32-characters"
JWT_EXPIRY="15m"
JWT_REFRESH_EXPIRY="7d"

# ==================== AZURE STORAGE ====================
# Azure Blob Storage Configuration
AZURE_STORAGE_ACCOUNT_NAME="eventixstorage"
AZURE_STORAGE_ACCOUNT_KEY="your-storage-account-key"
AZURE_STORAGE_CONNECTION_STRING="DefaultEndpointsProtocol=https;AccountName=eventixstorage;AccountKey=your-key;EndpointSuffix=core.windows.net"
# Alias used by backend storage helper (preferred if set)
BLOB_STORAGE_CONNECTION_STRING="${AZURE_STORAGE_CONNECTION_STRING}"
AZURE_BLOB_CONTAINER_EVENTS="event-images"
AZURE_BLOB_CONTAINER_QR_CODES="qr-codes"
AZURE_BLOB_CONTAINER_TICKETS="tickets"

# ==================== AZURE KEY VAULT ====================
# Azure Key Vault for secrets management
AZURE_KEYVAULT_URL="https://eventix-keyvault.vault.azure.net/"
AZURE_KEYVAULT_TENANT_ID="your-tenant-id"
AZURE_KEYVAULT_CLIENT_ID="your-client-id"
AZURE_KEYVAULT_CLIENT_SECRET="your-client-secret"

# ==================== AZURE APPLICATION INSIGHTS ====================
# Application Insights for monitoring and logging
APPINSIGHTS_CONNECTION_STRING="InstrumentationKey=your-key;IngestionEndpoint=https://southeastasia-1.in.applicationinsights.azure.com/;LiveEndpoint=https://southeastasia.livediagnostics.monitor.azure.com/"
APPINSIGHTS_INSTRUMENTATION_KEY="your-instrumentation-key"
LOG_LEVEL="info" # debug, info, warn, error

# ==================== PAYMENT GATEWAY ====================
# Midtrans (Indonesia primary)
MIDTRANS_MERCHANT_ID="your-merchant-id"
MIDTRANS_CLIENT_KEY="your-client-key"
MIDTRANS_SERVER_KEY="your-server-key"
MIDTRANS_ENVIRONMENT="sandbox" # "sandbox" or "production"

# Optional: Stripe
STRIPE_SECRET_KEY="sk_test_your-key"
STRIPE_PUBLISHABLE_KEY="pk_test_your-key"
STRIPE_WEBHOOK_SECRET="whsec_your-webhook-secret"

# ==================== EMAIL SERVICE ====================
# SendGrid for email notifications
SENDGRID_API_KEY="your-sendgrid-api-key"
SENDGRID_FROM_EMAIL="noreply@eventix.com"
SENDGRID_FROM_NAME="Eventix"

# Alternative: Azure Communication Services
AZURE_COMMUNICATION_CONNECTION_STRING="endpoint=https://your-service.communication.azure.com/;accesskey=your-key"

# ==================== SMS SERVICE ====================
# Azure Communication Services for SMS
AZURE_SMS_FROM_NUMBER="+6281234567890"

# ==================== QR CODE GENERATION ====================
QR_CODE_ERROR_CORRECTION="H" # L, M, Q, H
QR_CODE_WIDTH=300
QR_CODE_MARGIN=1

# ==================== PASSWORD HASHING ====================
# Bcrypt salt rounds (10-12 recommended, higher = slower but more secure)
BCRYPT_ROUNDS=12

# ==================== CORS & SECURITY ====================
# Allowed frontend origins
ALLOWED_ORIGINS="http://localhost:5173,http://localhost:3000,https://eventix.azurestaticapps.net"
# Enable CORS
CORS_ENABLED=true

# ==================== RATE LIMITING ====================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000 # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100 # max requests per window

# ==================== SESSION & CACHE ====================
# Redis Connection (Optional - for sessions and caching)
REDIS_CONNECTION_STRING="redis://:password@eventix-cache.redis.cache.windows.net:6379"
REDIS_ENABLED=false

# ==================== APPLICATION CONFIGURATION ====================
# API Configuration
API_PORT=7071
NODE_ENV="development" # development, staging, production
API_TIMEOUT_MS=30000

# Frontend URL (for redirects and email links)
FRONTEND_URL="http://localhost:5173"
FRONTEND_URL_PRODUCTION="https://eventix.azurestaticapps.net"

# ==================== FEATURE FLAGS ====================
ENABLE_PAYMENT_PROCESSING=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true

# ==================== DATABASE SEEDING ====================
# Set to 'true' to auto-seed on startup (development only!)
AUTO_SEED_DATABASE=false

# ==================== ENCRYPTION ====================
# Data encryption key for sensitive fields
ENCRYPTION_KEY="your-32-character-encryption-key-here"

# ==================== THIRD-PARTY INTEGRATIONS ====================
# Analytics
MIXPANEL_TOKEN="your-mixpanel-token"

# Logging
SENTRY_DSN="https://your-sentry-dsn"

# Documentation
SWAGGER_ENABLED=true
SWAGGER_PATH="/api-docs"

